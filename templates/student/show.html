{% extends "base.html" %}
{% load tag %}

{% block content %}
{% if lesson == "1" %}
  {% if work %}
<script type="text/javascript" src="/static/sb2/swfobject.js"></script>
 
<script type="text/javascript">   
var flashvars = {
project: "/static/work/scratch/{{request.user.id}}/{{work_dict|hash_file:index}}" ,
autostart: "false"
};
var params = {
bgcolor: "#FFFFFF",
allowScriptAccess: "always",
allowFullScreen: "true",
wmode: "window",
menu:"‘false"
};
var attributes = {};
swfobject.embedSWF("/static/sb2/Scratch.swf", "flashContent", "482", "387", "10.2.0","expressInstall.swf", flashvars, params, attributes);
</script>
    {% if work.score > 0 %}<div>分數：{{ work.score}} / 評分者：{{ work.scorer|realname}}</div>{% endif %}
    <div>心得感想：</div>
    <div>{{ work.memo }}</div>
    <div>程式：</div>
    <div id="flashContent" >
    </div>  
  {% else %}
    尚未繳交
  {% endif %}



{% elif lesson == "2" or lesson == "3" %}
  {% if work %}
    {% if work.score > 0 %}<div>分數：{{ work.score}} / 評分者：{{ work.scorer|realname}}</div>{% endif %}
    <div>心得感想：</div>
    <div>{{ work.memo }}</div>
    <div>創作過程：</div>
    <div>{{ work.helps }}</div>
    <div>程式碼：</div>
    <div class="position-relative">
      {{ work.code|code_highlight|safe }}
      <button class="btn btn-sm btn-primary my-1 position-absolute p-1 mr-1 border border-light" id="copy" style="right: 0; top: 0">copy</button>
    </div>
    <div>執行結果</div>
    <div><img src="/{{ work.picture }}" style="max-width: 100%"></div>
  {% else %}
    尚未繳交
  {% endif %}
{% endif %}
{% endblock %}

{% block domready %}
// copy code to clipboard
$('#copy').click(function() {
  var selobj = window.getSelection();
  var node = $('.code pre')[0];
  var range = document.createRange();

  selobj.empty();
  range.selectNode(node);
  selobj.addRange(range);
  document.execCommand('copy');
});
{% endblock %}