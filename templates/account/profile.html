{% extends "base.html" %}
{% block content %}
{% load tag %}

{% if user.id == user_id|to_int %}
<a href="/account/password-change"><img src="/static/images/icon_edit1.png">修改密碼</a>　
<a href="/account/realname"><img src="/static/images/icon_edit2.png">修改姓名</a>　
<a href="/account/school"><img src="/static/images/icon_edit3.png">修改學校</a>　
<a href="/account/email"><img src="/static/images/icon_edit4.png">修改信箱</a><BR><BR>
{% endif %}
  
<section class="wrapper">
  <h1>{{profile.user.first_name}}個人檔案</h1>
<p>信箱：{{profile.user.email}}</p>
<p>學校：{{school}}</p>
<p>班級：
{% for enroll in enrolls reversed %}
{{enroll.classroom.name}}({{enroll.seat}}號)
{% endfor %}
</p>
<section class="wrapper">
  <ul class="nav nav-pills" id="myTab" role="tablist">
    <li class="nav-item">
      <a class="nav-link active" data-toggle="tab" href="#tab1" role="tab" aria-selected="true">積分</a>
    </li>
    <li class="nav-item">
      <a class="nav-link" data-toggle="tab" href="#tab2" role="tab" aria-selected="false">證書</a>
    </li>
  </ul>
</section>
  <div class="tab-content" id="myTabContent">
    <div class="tab-pane fade show active" id="tab1" role="tabpanel" aria-labelledby="home-tab">
       <Table>
<tr><td rowspan=6 width=320><img src="/static/avatar/b{{ profile.avatar }}.png"></td></tr>
<tr><td>總積分</td><td>{{credit}}</td><td><a href="/account/log/0/{{user_id}}">記錄</a></td></tr>
<tr><td>作業積分</td><td>{{profile.work}}</td><td><a href="/account/log/1/{{user_id}}">記錄</a></td></tr>
<tr><td>小老師積分</td><td>{{profile.assistant}}</td><td><a href="/account/log/2/{{user_id}}">記錄</a></td></tr>
<tr><td>討論區積分</td><td>{{profile.forum}}</td><td><a href="/account/log/3/{{user_id}}">記錄</a></td></tr>         
<tr><td>創意秀積分</td><td>{{profile.creative}}</td><td><a href="/account/log/4/{{user_id}}">記錄</a></td></tr>
  </Table>		
    </div>
    <div class="tab-pane fade hide" id="tab2" role="tabpanel" aria-labelledby="home-tab">
      <table>
      
        {% for enroll in enrolls %}
        {% if enroll.certificate1 %}
        <tr><td><img src='/static/certification/1/1/{{enroll.id}}.jpg'></td></tr>
        {% endif %}

        {% if enroll.certificate2 %}
        <tr><td><img src='/static/certification/1/2/{{enroll.id}}.jpg'></td></tr>
        {% endif %}

        {% if enroll.certificate3 %}
        <tr><td><img src='/static/certification/1/3/{{enroll.id}}.jpg'></td></tr>
        {% endif %}

        {% if enroll.certificate4 %}
        <tr><td><img src='/static/certification/1/4/{{enroll.id}}.jpg'></td></tr>
        {% endif %}          
         
        {% if enroll.certificate_vphysics %}
        <tr><td><img src='/static/certification/2/1/{{enroll.id}}.jpg'></td></tr>
        {% endif %}       
          
        {% if enroll.certificate_euler %}
        <tr><td><img src='/static/certification/3/1/{{enroll.id}}.jpg'></td></tr>
        {% endif %}        
        
        {% if enroll.certificate_vphysics2 %}
        <tr><td><img src='/static/certification/4/1/{{enroll.id}}.jpg'></td></tr>
        {% endif %}         
        {% endfor %}    

      </table>
    </div>
  </div>
{% endblock %}
{% block domready %}
$(window).bind('hashchange', function() {
    var url = document.location.toString();
    if (url.match('#')) {
        $('.nav-pills a[href="#' + url.split('#')[1] + '"]').tab('show');
    }

    //Change hash for page-reload
    $('.nav-pills a[href="#' + url.split('#')[1] + '"]').on('shown', function (e) {
        window.location.hash = e.target.hash;
    }); 
} );  
{% endblock %}
{% block footer_script %}
<script>
window.onload = function(){  

    var url = document.location.toString();
    if (url.match('#')) {
        $('.nav-pills a[href="#' + url.split('#')[1] + '"]').tab('show');
    }

    //Change hash for page-reload
    $('.nav-pills a[href="#' + url.split('#')[1] + '"]').on('shown', function (e) {
        window.location.hash = e.target.hash;
    }); 
}           
</script>
{% endblock %}
